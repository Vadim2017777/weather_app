{"version":3,"sources":["webpack:///./js/services/apiServiceOneDay.js","webpack:///./js/services/apiWeatherImage.js","webpack:///./js/main.js","webpack:///./templates/weather_forecast-template.hbs"],"names":["API_KEY","query","fetchImages","requestParams","this","fetch","then","response","json","catch","error","string","randomNumber","Math","floor","random","refs","input","document","getElementById","currentWeather","bodyImg","querySelector","buildWeatherItemsMarkup","items","undefined","style","display","markup","weatherTemplate","insertAdjacentHTML","weatherImageBackground","searchQuery","apiServiceOneDay","baseUrl","parsedResponse","hits","channgeBodyImage","item","backgroundImage","largeImageURL","addEventListener","_","debounce","e","preventDefault","innerHTML","target","value","cod","dataTemp","countryName","name","sysCountry","sys","country","iconSrc","weather","icon","mainTemp","round","main","temp","mainTempMin","temp_min","mainTempMax","temp_max","alert","console","warn","Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call"],"mappings":"mKAEe,G,oBAAA,CACbA,QAAS,mCAETC,MAAO,GACPC,YAJa,WAKX,IAAMC,EAAgB,KAAKC,KAAKH,MAAb,uBAAyCG,KAAKJ,QAEjE,OACEK,MAVU,mDAUMF,GACbG,MAAK,SAAAC,GACJ,OAAOA,EAASC,UAGjBC,OAAM,SAAAC,GACL,MAAMA,MAKd,gBAAgBC,GACdP,KAAKH,MAAQU,GAEf,kBACE,OAAOP,KAAKH,SCrBZW,EAAeC,KAAKC,MAAMD,KAAKE,SAAWF,KAAKC,MAAM,K,qECQnDE,EAAO,CACXC,MAAOC,SAASC,eAAe,gBAC/BC,eAAgBF,SAASC,eAAe,mBACxCE,QAASH,SAASI,cAAc,SAkDlC,SAASC,EAAwBC,GAC/B,QAAcC,IAAVD,EAAJ,CAGER,EAAKI,eAAeM,MAAMC,QAAU,OACpC,IAAMC,EAASC,IAAgBL,GAC/BR,EAAKI,eAAeU,mBAAmB,YAAaF,IAOxD,SAASG,IACP,IDzEyB9B,ECyErB+B,EAAcC,EAAiBD,aDzEV/B,EC0Ed+B,EDzEJ3B,MACF6B,sEAAqDjC,EAArDiC,uDAEF5B,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAA6B,GAAc,OAAIA,EAAeC,KAAKxB,OCqEtBN,KAAK+B,GAG/B,SAASA,EAAiBC,QACXb,IAATa,IAGJtB,EAAKK,QAAQK,MAAMa,gBAAnB,QAA6CD,EAAKE,cAAlD,MArEFxB,EAAKC,MAAMwB,iBAAiB,QAASC,IAAEC,UAIvC,SAA0BC,GACxBA,EAAEC,iBAoDF7B,EAAKI,eAAe0B,UAAY,GAlDhC,IAAMd,EAAcY,EAAEG,OAAOC,MAC7Bf,EAAiBD,YAAcA,EAC/BY,EAAEG,OAAOC,MAAQ,GAMjBf,EACG/B,cACAI,MAAK,SAAAC,GACJ,GAAqB,QAAjBA,EAAS0C,IAGN,CACL,IAAMC,EAAW,OAAH,UAAQ3C,GAChB4C,EAAcD,EAASE,KACvBC,EAAaH,EAASI,IAAIC,QAC1BC,EAAUN,EAASO,QAAQ,GAAGC,KAIpC,MAAO,CACLP,cACAQ,SALe9C,KAAK+C,MAAMV,EAASW,KAAKC,MAMxCN,UACAH,aACAU,YAPkBlD,KAAK+C,MAAMV,EAASW,KAAKG,UAQ3CC,YAPkBpD,KAAK+C,MAAMV,EAASW,KAAKK,WAT7ClD,EAAKI,eAAeM,MAAMC,QAAU,OACpCjB,gBAAM,yBAoBTJ,KAAKiB,GACLd,OAAM,SAAAC,GACLyD,gBAAM,wBACNC,QAAQC,KAAK3D,MAhCjBqB,MAXgE,OAClEf,EAAKI,eAAeM,MAAMC,QAAU,OACpCI,K,qBCpBA,IAAIuC,EAAa,EAAQ,QAEzBC,EAAOC,SAAWF,EAAoB,SAAKA,GAAYG,SAAS,CAAC,SAAW,CAAC,EAAE,YAAY,KAAO,SAASC,EAAUC,EAAOC,EAAQC,EAASC,GACzI,IAAIC,EAAQC,EAAiB,MAAVL,EAAiBA,EAAUD,EAAUO,aAAe,GAAKC,EAAOR,EAAUS,MAAMC,cAAeC,EAAO,WAAYC,EAAOZ,EAAUa,iBAAkBC,EAAiBd,EAAUc,gBAAkB,SAASC,EAAQC,GAClO,GAAIC,OAAOC,UAAUC,eAAeC,KAAKL,EAAQC,GAC/C,OAAOD,EAAOC,IAKtB,MAAO,+CACHJ,SAASP,EAAyH,OAA/GA,EAASS,EAAeZ,EAAQ,aAAyB,MAAVD,EAAiBa,EAAeb,EAAO,WAAaA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,UAAU,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GACzT,iFACAO,SAASP,EAAiI,OAAvHA,EAASS,EAAeZ,EAAQ,iBAA6B,MAAVD,EAAiBa,EAAeb,EAAO,eAAiBA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,cAAc,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GACrU,KACAO,SAASP,EAA+H,OAArHA,EAASS,EAAeZ,EAAQ,gBAA4B,MAAVD,EAAiBa,EAAeb,EAAO,cAAgBA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,aAAa,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GAClU,iGACAO,SAASP,EAA2H,OAAjHA,EAASS,EAAeZ,EAAQ,cAA0B,MAAVD,EAAiBa,EAAeb,EAAO,YAAcA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,WAAW,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GAC5T,uNACAO,SAASP,EAAiI,OAAvHA,EAASS,EAAeZ,EAAQ,iBAA6B,MAAVD,EAAiBa,EAAeb,EAAO,eAAiBA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,cAAc,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,OAASC,GACvU,2IACAO,SAASP,EAAiI,OAAvHA,EAASS,EAAeZ,EAAQ,iBAA6B,MAAVD,EAAiBa,EAAeb,EAAO,eAAiBA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,cAAc,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,OAASC,GACvU,wCACJ,SAAU,K","file":"main.08d2ca24a5a9d92b606f.js","sourcesContent":["const baseUrl = 'https://api.openweathermap.org/data/2.5/weather?';\r\n\r\nexport default {\r\n  API_KEY: 'e6a412f77abd301d1f3f9864e669e17e',\r\n\r\n  query: '',\r\n  fetchImages() {\r\n    const requestParams = `q=${this.query}&units=metric&appid=${this.API_KEY}`;\r\n\r\n    return (\r\n      fetch(baseUrl + requestParams)\r\n        .then(response => {\r\n          return response.json();\r\n        })\r\n        // .then(response => console.log(response))\r\n        .catch(error => {\r\n          throw error;\r\n        })\r\n    );\r\n  },\r\n\r\n  set searchQuery(string) {\r\n    this.query = string;\r\n  },\r\n  get searchQuery() {\r\n    return this.query;\r\n  },\r\n};\r\n","'use strict';\r\n\r\nconst baseUrl = 'https://pixabay.com/api/';\r\nconst key = '&key=16237149-31f8128048fb3bf9af47cfac8';\r\nlet randomNumber = Math.floor(Math.random() * Math.floor(12));\r\n\r\nexport function fetchImage(query) {\r\n  return fetch(\r\n    `${baseUrl}?image_type=photo&orientation=horizontal&q=${query}&per_page=12${key}`,\r\n  )\r\n    .then(response => response.json())\r\n    .then(parsedResponse => parsedResponse.hits[randomNumber]);\r\n}\r\n","'use strict';\r\n\r\nimport '../../node_modules/basiclightbox/dist/basicLightbox.min.css';\r\nimport weatherTemplate from '../templates/weather_forecast-template.hbs';\r\nimport apiServiceOneDay from '../js/services/apiServiceOneDay.js';\r\nimport { fetchImage } from '../js/services/apiWeatherImage.js';\r\nimport '@pnotify/core/dist/BrightTheme.css';\r\nimport { alert, error } from '@pnotify/core/dist/PNotify';\r\nimport '@pnotify/core/dist/PNotify.css';\r\nimport 'material-design-icons/iconfont/material-icons.css';\r\nimport _ from 'lodash';\r\n\r\nconst refs = {\r\n  input: document.getElementById('search-input'),\r\n  currentWeather: document.getElementById('weather-info-js'),\r\n  bodyImg: document.querySelector('body'),\r\n};\r\n\r\nrefs.input.addEventListener('input', _.debounce(handleInputValue, 1500));\r\nrefs.currentWeather.style.display = 'none';\r\nweatherImageBackground();\r\n\r\nfunction handleInputValue(e) {\r\n  e.preventDefault();\r\n  clearMarkup();\r\n  const searchQuery = e.target.value;\r\n  apiServiceOneDay.searchQuery = searchQuery;\r\n  e.target.value = '';\r\n  createWeatherTemplate();\r\n  weatherImageBackground();\r\n}\r\n\r\nfunction createWeatherTemplate() {\r\n  apiServiceOneDay\r\n    .fetchImages()\r\n    .then(response => {\r\n      if (response.cod === '404') {\r\n        refs.currentWeather.style.display = 'none';\r\n        error('No such city found');\r\n      } else {\r\n        const dataTemp = { ...response };\r\n        const countryName = dataTemp.name;\r\n        const sysCountry = dataTemp.sys.country;\r\n        const iconSrc = dataTemp.weather[0].icon;\r\n        const mainTemp = Math.round(dataTemp.main.temp);\r\n        const mainTempMin = Math.round(dataTemp.main.temp_min);\r\n        const mainTempMax = Math.round(dataTemp.main.temp_max);\r\n        return {\r\n          countryName,\r\n          mainTemp,\r\n          iconSrc,\r\n          sysCountry,\r\n          mainTempMin,\r\n          mainTempMax,\r\n        };\r\n      }\r\n    })\r\n\r\n    .then(buildWeatherItemsMarkup)\r\n    .catch(error => {\r\n      alert('Somthing bad happend');\r\n      console.warn(error);\r\n    });\r\n}\r\n\r\nfunction buildWeatherItemsMarkup(items) {\r\n  if (items === undefined) {\r\n    return;\r\n  } else {\r\n    refs.currentWeather.style.display = 'flex';\r\n    const markup = weatherTemplate(items);\r\n    refs.currentWeather.insertAdjacentHTML('beforeend', markup);\r\n  }\r\n}\r\nfunction clearMarkup() {\r\n  refs.currentWeather.innerHTML = '';\r\n}\r\n\r\nfunction weatherImageBackground() {\r\n  let searchQuery = apiServiceOneDay.searchQuery;\r\n  fetchImage(searchQuery).then(channgeBodyImage);\r\n}\r\n\r\nfunction channgeBodyImage(item) {\r\n  if (item === undefined) {\r\n    return;\r\n  }\r\n  refs.bodyImg.style.backgroundImage = `url(\"${item.largeImageURL}\")`;\r\n}\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<img src=\\\"https://openweathermap.org/img/wn/\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"iconSrc\") || (depth0 != null ? lookupProperty(depth0,\"iconSrc\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"iconSrc\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":44},\"end\":{\"line\":1,\"column\":55}}}) : helper)))\n    + \"@2x.png\\\" alt=\\\"\\\" class=\\\"wether-img\\\" />\\r\\n\\r\\n<div class=\\\"weather-city\\\"><span> \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"countryName\") || (depth0 != null ? lookupProperty(depth0,\"countryName\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"countryName\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":33},\"end\":{\"line\":3,\"column\":48}}}) : helper)))\n    + \", \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"sysCountry\") || (depth0 != null ? lookupProperty(depth0,\"sysCountry\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"sysCountry\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":50},\"end\":{\"line\":3,\"column\":64}}}) : helper)))\n    + \"</span></div>\\r\\n<div class=\\\"weather-main-temp\\\">\\r\\n    <span class=\\\"weather-main-temp__sp \\\"> \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"mainTemp\") || (depth0 != null ? lookupProperty(depth0,\"mainTemp\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"mainTemp\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":42},\"end\":{\"line\":5,\"column\":54}}}) : helper)))\n    + \" </span><span class=\\\"mainspdeg\\\">\\r\\n        &deg;</span>\\r\\n</div>\\r\\n<div class=\\\"weather-minmax-cont\\\">\\r\\n    <div class=\\\"weather-mintemp\\\">\\r\\n        <span class=\\\"minsp\\\">min</span><br /><span class=\\\"minsptemp\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"mainTempMin\") || (depth0 != null ? lookupProperty(depth0,\"mainTempMin\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"mainTempMin\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":10,\"column\":68},\"end\":{\"line\":10,\"column\":83}}}) : helper)))\n    + \" &deg;</span>\\r\\n    </div>\\r\\n    <div class=\\\"weather-maxtemp\\\">\\r\\n        <span class=\\\"minsp\\\">max</span><br /><span class=\\\"minsptemp\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"mainTempMax\") || (depth0 != null ? lookupProperty(depth0,\"mainTempMax\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"mainTempMax\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":68},\"end\":{\"line\":13,\"column\":83}}}) : helper)))\n    + \"&deg;</span>\\r\\n    </div>\\r\\n</div>\";\n},\"useData\":true});"],"sourceRoot":""}